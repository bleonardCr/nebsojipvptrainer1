{"ast":null,"code":"// src/battleCalc.js\n// Competitive-lite PvP sim with robust move parsing and UI-friendly outputs.\n\nlet SPECIES = {}; // speciesId -> { atk, def, sta, types: [...] }\nlet MOVES = {}; // MOVE_ID   -> { id, kind:\"fast\"|\"charged\", type, power, energyGain, energyCost, turns }\n\n// ---------------- Utilities ----------------\nconst num = (v, d = 0) => Number.isFinite(Number(v)) ? Number(v) : d;\nfunction canonMoveId(s) {\n  if (!s) return \"\";\n  return String(s).trim().replace(/^COMBAT_V\\d+_MOVE_/i, \"\").replace(/^V\\d+_/i, \"\").replace(/[^A-Za-z0-9]+/g, \"_\").replace(/_+/g, \"_\").replace(/^_|_$/g, \"\").toUpperCase();\n}\nfunction normId(s) {\n  return String(s || '').toLowerCase().replace(/[^\\w]+/g, '_').replace(/^_+|_+$/g, '');\n}\nfunction tcase(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\nfunction normType(s) {\n  if (!s) return null;\n  const raw = String(s).replace(/^POKEMON_TYPE_/, '').replace(/_/g, ' ').trim().toLowerCase();\n  const T = tcase(raw);\n  return TYPES.includes(T) ? T : null;\n}\n\n// ---------------- League caps ----------------\nexport const LEAGUE_CAP = {\n  \"Great League\": 1500,\n  \"Ultra League\": 2500,\n  \"Master League\": Infinity\n};\n\n// ---------------- CP multipliers (0.5 levels to 50) ----------------\nconst CPM = [];\n(function fillCPM() {\n  const table = [0.094, 0.135137432, 0.16639787, 0.192650919, 0.21573247, 0.236572661, 0.25572005, 0.273530381, 0.29024988, 0.306057377, 0.3210876, 0.335445036, 0.34921268, 0.362457751, 0.37523559, 0.387592406, 0.39956728, 0.411193551, 0.42250001, 0.432926419, 0.44310755, 0.4530599578, 0.46279839, 0.472336083, 0.48168495, 0.4908558, 0.49985844, 0.508701765, 0.51739395, 0.525942511, 0.53435433, 0.542635767, 0.55079269, 0.558830576, 0.56675452, 0.574569153, 0.58227891, 0.589887907, 0.59740001, 0.604818814, 0.61215729, 0.619399365, 0.62656713, 0.633644533, 0.64065295, 0.647576426, 0.65443563, 0.661214806, 0.667934, 0.674577537, 0.68116492, 0.687680648, 0.69414365, 0.700538673, 0.70688421, 0.713164996, 0.71939909, 0.725571552, 0.7317, 0.734741009, 0.73776948, 0.740785574, 0.74378943, 0.746781211, 0.74976104, 0.752729087, 0.75568551, 0.758630378, 0.76156384, 0.764486065, 0.76739717, 0.770297266, 0.7731865, 0.776064962, 0.77893275, 0.781790055, 0.78463697, 0.787473578, 0.79030001, 0.792803968, 0.79530001, 0.797803921, 0.8003];\n  CPM.length = 100;\n  CPM.fill(0);\n  for (let i = 0; i < table.length; i++) CPM[i + 1] = table[i];\n})();\nconst STAB = 1.2;\n\n// ---------------- Type chart ----------------\nconst TYPES = [\"Normal\", \"Fighting\", \"Flying\", \"Poison\", \"Ground\", \"Rock\", \"Bug\", \"Ghost\", \"Steel\", \"Fire\", \"Water\", \"Grass\", \"Electric\", \"Psychic\", \"Ice\", \"Dragon\", \"Dark\", \"Fairy\"];\nconst EFF = {};\nTYPES.forEach(att => {\n  EFF[att] = {};\n  TYPES.forEach(def => EFF[att][def] = 1.0);\n});\nfunction S(atk, arr, m) {\n  arr.forEach(d => EFF[atk][d] = m);\n}\n_c = S;\nS(\"Fighting\", [\"Normal\", \"Rock\", \"Ice\", \"Dark\", \"Steel\"], 1.6);\nS(\"Fighting\", [\"Flying\", \"Poison\", \"Bug\", \"Psychic\", \"Fairy\"], 0.625);\nS(\"Flying\", [\"Fighting\", \"Bug\", \"Grass\"], 1.6);\nS(\"Flying\", [\"Rock\", \"Steel\", \"Electric\"], 0.625);\nS(\"Poison\", [\"Grass\", \"Fairy\"], 1.6);\nS(\"Poison\", [\"Poison\", \"Ground\", \"Rock\", \"Ghost\"], 0.625);\nS(\"Poison\", [\"Steel\"], 0.390625);\nS(\"Ground\", [\"Poison\", \"Rock\", \"Steel\", \"Fire\", \"Electric\"], 1.6);\nS(\"Ground\", [\"Bug\", \"Grass\"], 0.625);\nS(\"Ground\", [\"Flying\"], 0.390625);\nS(\"Rock\", [\"Flying\", \"Bug\", \"Fire\", \"Ice\"], 1.6);\nS(\"Rock\", [\"Fighting\", \"Ground\", \"Steel\"], 0.625);\nS(\"Bug\", [\"Grass\", \"Psychic\", \"Dark\"], 1.6);\nS(\"Bug\", [\"Fighting\", \"Flying\", \"Poison\", \"Ghost\", \"Steel\", \"Fire\", \"Fairy\"], 0.625);\nS(\"Ghost\", [\"Ghost\", \"Psychic\"], 1.6);\nS(\"Ghost\", [\"Dark\"], 0.625);\nS(\"Steel\", [\"Rock\", \"Ice\", \"Fairy\"], 1.6);\nS(\"Steel\", [\"Steel\", \"Fire\", \"Water\", \"Electric\"], 0.625);\nS(\"Fire\", [\"Bug\", \"Steel\", \"Grass\", \"Ice\"], 1.6);\nS(\"Fire\", [\"Rock\", \"Fire\", \"Water\", \"Dragon\"], 0.625);\nS(\"Water\", [\"Ground\", \"Rock\", \"Fire\"], 1.6);\nS(\"Water\", [\"Water\", \"Grass\", \"Dragon\"], 0.625);\nS(\"Grass\", [\"Ground\", \"Rock\", \"Water\"], 1.6);\nS(\"Grass\", [\"Flying\", \"Poison\", \"Bug\", \"Steel\", \"Fire\", \"Grass\", \"Dragon\"], 0.625);\nS(\"Electric\", [\"Flying\", \"Water\"], 1.6);\nS(\"Electric\", [\"Grass\", \"Electric\", \"Dragon\"], 0.625);\nS(\"Electric\", [\"Ground\"], 0.390625);\nS(\"Psychic\", [\"Fighting\", \"Poison\"], 1.6);\nS(\"Psychic\", [\"Psychic\", \"Steel\"], 0.625);\nS(\"Psychic\", [\"Dark\"], 0.390625);\nS(\"Ice\", [\"Flying\", \"Ground\", \"Grass\", \"Dragon\"], 1.6);\nS(\"Ice\", [\"Steel\", \"Fire\", \"Water\", \"Ice\"], 0.625);\nS(\"Dragon\", [\"Dragon\"], 1.6);\nS(\"Dragon\", [\"Steel\"], 0.625);\nS(\"Dragon\", [\"Fairy\"], 0.390625);\nS(\"Dark\", [\"Ghost\", \"Psychic\"], 1.6);\nS(\"Dark\", [\"Fighting\", \"Dark\", \"Fairy\"], 0.625);\nS(\"Fairy\", [\"Fighting\", \"Dragon\", \"Dark\"], 1.6);\nS(\"Fairy\", [\"Poison\", \"Steel\", \"Fire\"], 0.625);\nfunction eff(moveType, defendTypes) {\n  let m = 1;\n  for (const t of defendTypes) {\n    var _EFF$moveType$t, _EFF$moveType;\n    m *= (_EFF$moveType$t = (_EFF$moveType = EFF[moveType]) === null || _EFF$moveType === void 0 ? void 0 : _EFF$moveType[t]) !== null && _EFF$moveType$t !== void 0 ? _EFF$moveType$t : 1;\n  }\n  return m;\n}\nfunction damage(pwr, atk, def, stab, effm) {\n  const val = 0.5 * num(pwr, 0) * (num(atk, 1) / Math.max(1, num(def, 1))) * num(stab, 1) * num(effm, 1);\n  const out = Math.max(1, Math.floor(val) + 1);\n  return Number.isFinite(out) ? out : 1;\n}\nfunction cp(atk, def, sta, cpm) {\n  return Math.floor(atk * Math.sqrt(def) * Math.sqrt(sta) * cpm * cpm / 10);\n}\nfunction levelForCap(baseAtk, baseDef, baseSta, cap) {\n  if (!isFinite(cap)) return 99;\n  for (let i = 99; i >= 1; i--) {\n    const cpm = CPM[i],\n      cAtk = baseAtk * cpm,\n      cDef = baseDef * cpm,\n      cSta = baseSta * cpm;\n    if (cp(cAtk, cDef, cSta, 1) <= cap) return i;\n  }\n  return 99;\n}\n\n// ---------------- Books ----------------\nfunction buildSpeciesBook(gm) {\n  var _gm$data;\n  const poke = (gm === null || gm === void 0 ? void 0 : gm.pokemon) || (gm === null || gm === void 0 ? void 0 : (_gm$data = gm.data) === null || _gm$data === void 0 ? void 0 : _gm$data.pokemon) || (gm === null || gm === void 0 ? void 0 : gm.species) || [];\n  const out = {};\n  for (const p of poke) {\n    var _p$types, _p$types2, _ref, _p$baseAttack, _p$stats, _ref2, _p$baseDefense, _p$stats2, _ref3, _p$baseStamina, _p$stats3;\n    const id = normId(p.speciesId || p.pokemonId || p.id || p.name || p.templateId);\n    if (!id) continue;\n    const types = [normType(p.type1 || ((_p$types = p.types) === null || _p$types === void 0 ? void 0 : _p$types[0])), normType(p.type2 || ((_p$types2 = p.types) === null || _p$types2 === void 0 ? void 0 : _p$types2[1]))].filter(Boolean);\n    const atk = num((_ref = (_p$baseAttack = p.baseAttack) !== null && _p$baseAttack !== void 0 ? _p$baseAttack : (_p$stats = p.stats) === null || _p$stats === void 0 ? void 0 : _p$stats.atk) !== null && _ref !== void 0 ? _ref : p.attack, 200);\n    const def = num((_ref2 = (_p$baseDefense = p.baseDefense) !== null && _p$baseDefense !== void 0 ? _p$baseDefense : (_p$stats2 = p.stats) === null || _p$stats2 === void 0 ? void 0 : _p$stats2.def) !== null && _ref2 !== void 0 ? _ref2 : p.defense, 200);\n    const sta = num((_ref3 = (_p$baseStamina = p.baseStamina) !== null && _p$baseStamina !== void 0 ? _p$baseStamina : (_p$stats3 = p.stats) === null || _p$stats3 === void 0 ? void 0 : _p$stats3.sta) !== null && _ref3 !== void 0 ? _ref3 : p.stamina, 200);\n    out[id] = {\n      atk,\n      def,\n      sta,\n      types: types.length ? types : [\"Normal\"]\n    };\n  }\n  return out;\n}\nexport function buildMoveBook(gm) {\n  var _gm$data2, _gm$data3;\n  SPECIES = buildSpeciesBook(gm);\n  const pools = [gm === null || gm === void 0 ? void 0 : gm.moves, gm === null || gm === void 0 ? void 0 : gm.combatMoves, gm === null || gm === void 0 ? void 0 : (_gm$data2 = gm.data) === null || _gm$data2 === void 0 ? void 0 : _gm$data2.moves, gm === null || gm === void 0 ? void 0 : (_gm$data3 = gm.data) === null || _gm$data3 === void 0 ? void 0 : _gm$data3.combatMoves, gm === null || gm === void 0 ? void 0 : gm.moveList].filter(Boolean);\n  const out = {};\n  for (const list of pools) {\n    for (const m of list) {\n      var _ref4, _ref5, _ref6, _ref7, _m$moveId, _ref8, _ref9, _m$pvpPower, _ref0, _m$durationTurns;\n      const rawId = (_ref4 = (_ref5 = (_ref6 = (_ref7 = (_m$moveId = m.moveId) !== null && _m$moveId !== void 0 ? _m$moveId : m.id) !== null && _ref7 !== void 0 ? _ref7 : m.uniqueId) !== null && _ref6 !== void 0 ? _ref6 : m.templateId) !== null && _ref5 !== void 0 ? _ref5 : m.name) !== null && _ref4 !== void 0 ? _ref4 : \"\";\n      const id = canonMoveId(rawId);\n      if (!id) continue;\n      const type = normType(m.type || m.pokemonType || m.moveType) || \"Normal\";\n      const power = num((_ref8 = (_ref9 = (_m$pvpPower = m.pvpPower) !== null && _m$pvpPower !== void 0 ? _m$pvpPower : m.power) !== null && _ref9 !== void 0 ? _ref9 : m.combatPower) !== null && _ref8 !== void 0 ? _ref8 : m.damage, 0);\n      let kind = \"fast\";\n      let energyGain = 0;\n      let energyCost = 0;\n      let turns = 0;\n\n      // Niantic style\n      if (m.energyDelta != null) {\n        const ed = num(m.energyDelta, 0);\n        if (ed > 0) {\n          kind = \"fast\";\n          energyGain = ed;\n        }\n        if (ed < 0) {\n          kind = \"charged\";\n          energyCost = Math.abs(ed);\n        }\n      }\n      // PvPoke style\n      if (m.energyGain != null) {\n        kind = \"fast\";\n        energyGain = num(m.energyGain, 0);\n      }\n      if (m.energy != null) {\n        kind = \"charged\";\n        energyCost = Math.abs(num(m.energy, 0));\n      }\n      turns = num((_ref0 = (_m$durationTurns = m.durationTurns) !== null && _m$durationTurns !== void 0 ? _m$durationTurns : m.turns) !== null && _ref0 !== void 0 ? _ref0 : m.cooldownTurns, kind === \"fast\" ? 1 : 0);\n      if (kind === \"fast\") turns = Math.max(1, Math.floor(turns) || 1);\n\n      // Fallbacks so battles actually progress\n      if (kind === \"fast\" && energyGain <= 0) {\n        console.warn(`[PvP] fast move ${id} missing energyGain; using 8.`);\n        energyGain = 8;\n      }\n      if (kind === \"charged\" && energyCost <= 0) {\n        console.warn(`[PvP] charged move ${id} missing energy cost; using 45.`);\n        energyCost = 45;\n      }\n      const move = {\n        id,\n        kind,\n        type,\n        power,\n        energyGain,\n        energyCost,\n        turns\n      };\n      if (!out[id] || power > out[id].power) out[id] = move;\n    }\n  }\n  MOVES = out;\n  return out;\n}\n\n// ---------------- Core sim helpers ----------------\nfunction enrichSideForLeague(src, leagueName = \"Master League\") {\n  var _LEAGUE_CAP$leagueNam, _SPECIES$sid;\n  const cap = typeof leagueName === \"string\" ? (_LEAGUE_CAP$leagueNam = LEAGUE_CAP[leagueName]) !== null && _LEAGUE_CAP$leagueNam !== void 0 ? _LEAGUE_CAP$leagueNam : Infinity : Number.isFinite(leagueName) ? Number(leagueName) : Infinity;\n  const sid = normId(src.speciesId || src.name);\n  const base = SPECIES[sid] || {\n    atk: 200,\n    def: 200,\n    sta: 200,\n    types: [\"Normal\"]\n  };\n  const li = levelForCap(base.atk, base.def, base.sta, cap);\n  const cpm = CPM[li] || CPM[99];\n  const Atk = base.atk * cpm;\n  const Def = base.def * cpm;\n  const Sta = Math.floor(base.sta * cpm) * 2; // a bit tankier UI bar\n\n  const fastId = canonMoveId(src.fastMove);\n  const fast = MOVES[fastId] || null;\n  if (!fast) console.warn(`[PvP] fast move not found for ${src.name || src.speciesId}:`, src.fastMove);\n  const chargedMoves = (src.chargedMoves || []).map(canonMoveId).map(id => {\n    const mv = MOVES[id];\n    if (!mv) console.warn(`[PvP] charged move not found for ${src.name || src.speciesId}:`, id);\n    return mv;\n  }).filter(Boolean);\n  return {\n    name: src.name || src.speciesId,\n    speciesId: sid,\n    types: ((_SPECIES$sid = SPECIES[sid]) === null || _SPECIES$sid === void 0 ? void 0 : _SPECIES$sid.types) || [\"Normal\"],\n    Atk,\n    Def,\n    MaxHP: Sta,\n    HP: Sta,\n    fast,\n    chargedMoves,\n    energy: 0\n  };\n}\nfunction bestCharged(att, def) {\n  let best = null,\n    bestScore = -Infinity;\n  for (const m of att.chargedMoves || []) {\n    if (!m || m.kind !== \"charged\") continue;\n    const stab = att.types.includes(m.type) ? STAB : 1;\n    const effm = eff(m.type, def.types);\n    const dmg = damage(m.power, att.Atk, def.Def, stab, effm);\n    const dpe = (m.power || 0) / (m.energyCost || 45);\n    const score = dmg * 1.0 + dpe * 2.5; // bias to chunk and efficiency\n    if (score > bestScore) {\n      bestScore = score;\n      best = m;\n    }\n  }\n  return best;\n}\n\n// ---------------- Public: simulateDuel (UI-friendly shape) ----------------\nexport function simulateDuel(attackerIn, defenderIn, shieldsA = 2, shieldsB = 2, _book = MOVES, leagueName = \"Master League\") {\n  const A = enrichSideForLeague(attackerIn, leagueName);\n  const B = enrichSideForLeague(defenderIn, leagueName);\n\n  // Pre-pick recommendations vs the known foe\n  const recA = bestCharged(A, B);\n  const recB = bestCharged(B, A);\n  let aSh = Math.max(0, shieldsA | 0),\n    bSh = Math.max(0, shieldsB | 0);\n  let t = 0;\n  const MAX_TURNS = 2000;\n  const log = [];\n  const canThrow = u => (u.chargedMoves || []).some(m => u.energy >= (m.energyCost || 45));\n  const chooseThrow = (u, foe) => {\n    let pick = null,\n      best = -Infinity;\n    for (const m of u.chargedMoves || []) {\n      if (u.energy < (m.energyCost || 45)) continue;\n      const stab = u.types.includes(m.type) ? STAB : 1;\n      const mult = eff(m.type, foe.types);\n      const dmg = damage(m.power, u.Atk, foe.Def, stab, mult);\n      if (dmg > best) {\n        best = dmg;\n        pick = m;\n      }\n    }\n    return pick;\n  };\n  while (A.HP > 0 && B.HP > 0 && t < MAX_TURNS) {\n    t++;\n\n    // fast energy on their turn cadence\n    if (A.fast && t % (A.fast.turns || 1) === 0) A.energy += num(A.fast.energyGain, 0);\n    if (B.fast && t % (B.fast.turns || 1) === 0) B.energy += num(B.fast.energyGain, 0);\n    const aMove = canThrow(A) ? chooseThrow(A, B) : null;\n    const bMove = canThrow(B) ? chooseThrow(B, A) : null;\n\n    // CMP: attacker with higher Atk throws first on ties\n    const aFirst = aMove && bMove ? A.Atk >= B.Atk : !!aMove;\n    function resolveThrow(user, foe, move, who) {\n      if (!move) return;\n      const stab = user.types.includes(move.type) ? STAB : 1;\n      const mult = eff(move.type, foe.types);\n      const hit = damage(move.power, user.Atk, foe.Def, stab, mult);\n      let shielded = false;\n      if (who === \"A\" && bSh > 0) {\n        if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) {\n          bSh--;\n          shielded = true;\n        }\n      } else if (who === \"B\" && aSh > 0) {\n        if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) {\n          aSh--;\n          shielded = true;\n        }\n      }\n      if (!shielded) {\n        foe.HP = Math.max(0, foe.HP - hit);\n      }\n      user.energy -= move.energyCost || 45;\n      log.push(`${who} throws ${move.id}${shielded ? ' (shielded)' : ''}`);\n    }\n    if (aFirst) {\n      if (aMove) resolveThrow(A, B, aMove, \"A\");else if (A.fast && t % (A.fast.turns || 1) === 0) {\n        const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\n        B.HP = Math.max(0, B.HP - hit);\n      }\n      if (B.HP <= 0) break;\n      if (bMove) resolveThrow(B, A, bMove, \"B\");else if (B.fast && t % (B.fast.turns || 1) === 0) {\n        const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\n        A.HP = Math.max(0, A.HP - hit);\n      }\n      if (A.HP <= 0) break;\n    } else {\n      if (bMove) resolveThrow(B, A, bMove, \"B\");else if (B.fast && t % (B.fast.turns || 1) === 0) {\n        const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\n        A.HP = Math.max(0, A.HP - hit);\n      }\n      if (A.HP <= 0) break;\n      if (aMove) resolveThrow(A, B, aMove, \"A\");else if (A.fast && t % (A.fast.turns || 1) === 0) {\n        const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\n        B.HP = Math.max(0, B.HP - hit);\n      }\n      if (B.HP <= 0) break;\n    }\n  }\n  const winner = A.HP <= 0 && B.HP <= 0 ? \"Draw\" : A.HP <= 0 ? B.name : B.HP <= 0 ? A.name : A.HP === B.HP ? \"Draw\" : A.HP > B.HP ? A.name : B.name;\n  return {\n    winner,\n    aHP: Math.round(A.HP / A.MaxHP * 100),\n    bHP: Math.round(B.HP / B.MaxHP * 100),\n    aRecommended: (recA === null || recA === void 0 ? void 0 : recA.id) || null,\n    bRecommended: (recB === null || recB === void 0 ? void 0 : recB.id) || null,\n    summary: log.slice(0, 12)\n  };\n}\n\n// ---------------- Public: bestOfThree (exact shape App expects) ----------------\nexport function bestOfThree(mine, enemy, myShields, foeShields, _book = MOVES, leagueName = \"Master League\") {\n  const fights = mine.map(m => {\n    const you = {\n      ...m,\n      name: m.name || m.speciesId\n    };\n    const foe = {\n      ...enemy,\n      name: enemy.name || enemy.speciesId\n    };\n    const r = simulateDuel(you, foe, myShields, foeShields, MOVES, leagueName);\n    const score = r.winner === you.name ? 1 : r.winner === \"Draw\" ? 0 : -1;\n    return {\n      you: you.name,\n      vs: foe.name,\n      ...r,\n      score\n    };\n  });\n  fights.sort((a, b) => b.score - a.score || b.aHP - a.aHP || b.bHP - a.bHP);\n  return {\n    best: fights[0],\n    fights\n  };\n}\nvar _c;\n$RefreshReg$(_c, \"S\");","map":{"version":3,"names":["SPECIES","MOVES","num","v","d","Number","isFinite","canonMoveId","s","String","trim","replace","toUpperCase","normId","toLowerCase","tcase","charAt","slice","normType","raw","T","TYPES","includes","LEAGUE_CAP","Infinity","CPM","fillCPM","table","length","fill","i","STAB","EFF","forEach","att","def","S","atk","arr","m","_c","eff","moveType","defendTypes","t","_EFF$moveType$t","_EFF$moveType","damage","pwr","stab","effm","val","Math","max","out","floor","cp","sta","cpm","sqrt","levelForCap","baseAtk","baseDef","baseSta","cap","cAtk","cDef","cSta","buildSpeciesBook","gm","_gm$data","poke","pokemon","data","species","p","_p$types","_p$types2","_ref","_p$baseAttack","_p$stats","_ref2","_p$baseDefense","_p$stats2","_ref3","_p$baseStamina","_p$stats3","id","speciesId","pokemonId","name","templateId","types","type1","type2","filter","Boolean","baseAttack","stats","attack","baseDefense","defense","baseStamina","stamina","buildMoveBook","_gm$data2","_gm$data3","pools","moves","combatMoves","moveList","list","_ref4","_ref5","_ref6","_ref7","_m$moveId","_ref8","_ref9","_m$pvpPower","_ref0","_m$durationTurns","rawId","moveId","uniqueId","type","pokemonType","power","pvpPower","combatPower","kind","energyGain","energyCost","turns","energyDelta","ed","abs","energy","durationTurns","cooldownTurns","console","warn","move","enrichSideForLeague","src","leagueName","_LEAGUE_CAP$leagueNam","_SPECIES$sid","sid","base","li","Atk","Def","Sta","fastId","fastMove","fast","chargedMoves","map","mv","MaxHP","HP","bestCharged","best","bestScore","dmg","dpe","score","simulateDuel","attackerIn","defenderIn","shieldsA","shieldsB","_book","A","B","recA","recB","aSh","bSh","MAX_TURNS","log","canThrow","u","some","chooseThrow","foe","pick","mult","aMove","bMove","aFirst","resolveThrow","user","who","hit","shielded","push","winner","aHP","round","bHP","aRecommended","bRecommended","summary","bestOfThree","mine","enemy","myShields","foeShields","fights","you","r","vs","sort","a","b","$RefreshReg$"],"sources":["C:/Users/ben/Projects/nebsojipvptrainer/src/battleCalc.js"],"sourcesContent":["// src/battleCalc.js\r\n// Competitive-lite PvP sim with robust move parsing and UI-friendly outputs.\r\n\r\nlet SPECIES = {};  // speciesId -> { atk, def, sta, types: [...] }\r\nlet MOVES = {};  // MOVE_ID   -> { id, kind:\"fast\"|\"charged\", type, power, energyGain, energyCost, turns }\r\n\r\n// ---------------- Utilities ----------------\r\nconst num = (v, d = 0) => (Number.isFinite(Number(v)) ? Number(v) : d);\r\nfunction canonMoveId(s) {\r\n    if (!s) return \"\";\r\n    return String(s)\r\n        .trim()\r\n        .replace(/^COMBAT_V\\d+_MOVE_/i, \"\")\r\n        .replace(/^V\\d+_/i, \"\")\r\n        .replace(/[^A-Za-z0-9]+/g, \"_\")\r\n        .replace(/_+/g, \"_\")\r\n        .replace(/^_|_$/g, \"\")\r\n        .toUpperCase();\r\n}\r\nfunction normId(s) { return String(s || '').toLowerCase().replace(/[^\\w]+/g, '_').replace(/^_+|_+$/g, ''); }\r\nfunction tcase(s) { return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase(); }\r\nfunction normType(s) {\r\n    if (!s) return null;\r\n    const raw = String(s).replace(/^POKEMON_TYPE_/, '').replace(/_/g, ' ').trim().toLowerCase();\r\n    const T = tcase(raw);\r\n    return TYPES.includes(T) ? T : null;\r\n}\r\n\r\n// ---------------- League caps ----------------\r\nexport const LEAGUE_CAP = {\r\n    \"Great League\": 1500,\r\n    \"Ultra League\": 2500,\r\n    \"Master League\": Infinity\r\n};\r\n\r\n// ---------------- CP multipliers (0.5 levels to 50) ----------------\r\nconst CPM = [];\r\n(function fillCPM() {\r\n    const table = [\r\n        0.094, 0.135137432, 0.16639787, 0.192650919, 0.21573247, 0.236572661, 0.25572005, 0.273530381,\r\n        0.29024988, 0.306057377, 0.3210876, 0.335445036, 0.34921268, 0.362457751, 0.37523559, 0.387592406,\r\n        0.39956728, 0.411193551, 0.42250001, 0.432926419, 0.44310755, 0.4530599578, 0.46279839, 0.472336083,\r\n        0.48168495, 0.4908558, 0.49985844, 0.508701765, 0.51739395, 0.525942511, 0.53435433, 0.542635767,\r\n        0.55079269, 0.558830576, 0.56675452, 0.574569153, 0.58227891, 0.589887907, 0.59740001, 0.604818814,\r\n        0.61215729, 0.619399365, 0.62656713, 0.633644533, 0.64065295, 0.647576426, 0.65443563, 0.661214806,\r\n        0.667934, 0.674577537, 0.68116492, 0.687680648, 0.69414365, 0.700538673, 0.70688421, 0.713164996,\r\n        0.71939909, 0.725571552, 0.7317, 0.734741009, 0.73776948, 0.740785574, 0.74378943, 0.746781211,\r\n        0.74976104, 0.752729087, 0.75568551, 0.758630378, 0.76156384, 0.764486065, 0.76739717, 0.770297266,\r\n        0.7731865, 0.776064962, 0.77893275, 0.781790055, 0.78463697, 0.787473578, 0.79030001, 0.792803968,\r\n        0.79530001, 0.797803921, 0.8003\r\n    ];\r\n    CPM.length = 100; CPM.fill(0);\r\n    for (let i = 0; i < table.length; i++) CPM[i + 1] = table[i];\r\n})();\r\nconst STAB = 1.2;\r\n\r\n// ---------------- Type chart ----------------\r\nconst TYPES = [\r\n    \"Normal\", \"Fighting\", \"Flying\", \"Poison\", \"Ground\", \"Rock\", \"Bug\", \"Ghost\", \"Steel\",\r\n    \"Fire\", \"Water\", \"Grass\", \"Electric\", \"Psychic\", \"Ice\", \"Dragon\", \"Dark\", \"Fairy\"\r\n];\r\nconst EFF = {};\r\nTYPES.forEach(att => { EFF[att] = {}; TYPES.forEach(def => EFF[att][def] = 1.0); });\r\nfunction S(atk, arr, m) { arr.forEach(d => EFF[atk][d] = m); }\r\nS(\"Fighting\", [\"Normal\", \"Rock\", \"Ice\", \"Dark\", \"Steel\"], 1.6); S(\"Fighting\", [\"Flying\", \"Poison\", \"Bug\", \"Psychic\", \"Fairy\"], 0.625);\r\nS(\"Flying\", [\"Fighting\", \"Bug\", \"Grass\"], 1.6); S(\"Flying\", [\"Rock\", \"Steel\", \"Electric\"], 0.625);\r\nS(\"Poison\", [\"Grass\", \"Fairy\"], 1.6); S(\"Poison\", [\"Poison\", \"Ground\", \"Rock\", \"Ghost\"], 0.625); S(\"Poison\", [\"Steel\"], 0.390625);\r\nS(\"Ground\", [\"Poison\", \"Rock\", \"Steel\", \"Fire\", \"Electric\"], 1.6); S(\"Ground\", [\"Bug\", \"Grass\"], 0.625); S(\"Ground\", [\"Flying\"], 0.390625);\r\nS(\"Rock\", [\"Flying\", \"Bug\", \"Fire\", \"Ice\"], 1.6); S(\"Rock\", [\"Fighting\", \"Ground\", \"Steel\"], 0.625);\r\nS(\"Bug\", [\"Grass\", \"Psychic\", \"Dark\"], 1.6); S(\"Bug\", [\"Fighting\", \"Flying\", \"Poison\", \"Ghost\", \"Steel\", \"Fire\", \"Fairy\"], 0.625);\r\nS(\"Ghost\", [\"Ghost\", \"Psychic\"], 1.6); S(\"Ghost\", [\"Dark\"], 0.625);\r\nS(\"Steel\", [\"Rock\", \"Ice\", \"Fairy\"], 1.6); S(\"Steel\", [\"Steel\", \"Fire\", \"Water\", \"Electric\"], 0.625);\r\nS(\"Fire\", [\"Bug\", \"Steel\", \"Grass\", \"Ice\"], 1.6); S(\"Fire\", [\"Rock\", \"Fire\", \"Water\", \"Dragon\"], 0.625);\r\nS(\"Water\", [\"Ground\", \"Rock\", \"Fire\"], 1.6); S(\"Water\", [\"Water\", \"Grass\", \"Dragon\"], 0.625);\r\nS(\"Grass\", [\"Ground\", \"Rock\", \"Water\"], 1.6); S(\"Grass\", [\"Flying\", \"Poison\", \"Bug\", \"Steel\", \"Fire\", \"Grass\", \"Dragon\"], 0.625);\r\nS(\"Electric\", [\"Flying\", \"Water\"], 1.6); S(\"Electric\", [\"Grass\", \"Electric\", \"Dragon\"], 0.625); S(\"Electric\", [\"Ground\"], 0.390625);\r\nS(\"Psychic\", [\"Fighting\", \"Poison\"], 1.6); S(\"Psychic\", [\"Psychic\", \"Steel\"], 0.625); S(\"Psychic\", [\"Dark\"], 0.390625);\r\nS(\"Ice\", [\"Flying\", \"Ground\", \"Grass\", \"Dragon\"], 1.6); S(\"Ice\", [\"Steel\", \"Fire\", \"Water\", \"Ice\"], 0.625);\r\nS(\"Dragon\", [\"Dragon\"], 1.6); S(\"Dragon\", [\"Steel\"], 0.625); S(\"Dragon\", [\"Fairy\"], 0.390625);\r\nS(\"Dark\", [\"Ghost\", \"Psychic\"], 1.6); S(\"Dark\", [\"Fighting\", \"Dark\", \"Fairy\"], 0.625);\r\nS(\"Fairy\", [\"Fighting\", \"Dragon\", \"Dark\"], 1.6); S(\"Fairy\", [\"Poison\", \"Steel\", \"Fire\"], 0.625);\r\n\r\nfunction eff(moveType, defendTypes) {\r\n    let m = 1; for (const t of defendTypes) { m *= (EFF[moveType]?.[t] ?? 1); } return m;\r\n}\r\nfunction damage(pwr, atk, def, stab, effm) {\r\n    const val = 0.5 * num(pwr, 0) * (num(atk, 1) / Math.max(1, num(def, 1))) * num(stab, 1) * num(effm, 1);\r\n    const out = Math.max(1, Math.floor(val) + 1);\r\n    return Number.isFinite(out) ? out : 1;\r\n}\r\nfunction cp(atk, def, sta, cpm) { return Math.floor((atk * Math.sqrt(def) * Math.sqrt(sta) * cpm * cpm) / 10); }\r\nfunction levelForCap(baseAtk, baseDef, baseSta, cap) {\r\n    if (!isFinite(cap)) return 99;\r\n    for (let i = 99; i >= 1; i--) {\r\n        const cpm = CPM[i], cAtk = baseAtk * cpm, cDef = baseDef * cpm, cSta = baseSta * cpm;\r\n        if (cp(cAtk, cDef, cSta, 1) <= cap) return i;\r\n    }\r\n    return 99;\r\n}\r\n\r\n// ---------------- Books ----------------\r\nfunction buildSpeciesBook(gm) {\r\n    const poke = gm?.pokemon || gm?.data?.pokemon || gm?.species || [];\r\n    const out = {};\r\n    for (const p of poke) {\r\n        const id = normId(p.speciesId || p.pokemonId || p.id || p.name || p.templateId);\r\n        if (!id) continue;\r\n        const types = [normType(p.type1 || p.types?.[0]), normType(p.type2 || p.types?.[1])].filter(Boolean);\r\n        const atk = num(p.baseAttack ?? p.stats?.atk ?? p.attack, 200);\r\n        const def = num(p.baseDefense ?? p.stats?.def ?? p.defense, 200);\r\n        const sta = num(p.baseStamina ?? p.stats?.sta ?? p.stamina, 200);\r\n        out[id] = { atk, def, sta, types: types.length ? types : [\"Normal\"] };\r\n    }\r\n    return out;\r\n}\r\n\r\nexport function buildMoveBook(gm) {\r\n    SPECIES = buildSpeciesBook(gm);\r\n\r\n    const pools = [gm?.moves, gm?.combatMoves, gm?.data?.moves, gm?.data?.combatMoves, gm?.moveList].filter(Boolean);\r\n    const out = {};\r\n\r\n    for (const list of pools) {\r\n        for (const m of list) {\r\n            const rawId = m.moveId ?? m.id ?? m.uniqueId ?? m.templateId ?? m.name ?? \"\";\r\n            const id = canonMoveId(rawId);\r\n            if (!id) continue;\r\n\r\n            const type = normType(m.type || m.pokemonType || m.moveType) || \"Normal\";\r\n            const power = num(m.pvpPower ?? m.power ?? m.combatPower ?? m.damage, 0);\r\n\r\n            let kind = \"fast\";\r\n            let energyGain = 0;\r\n            let energyCost = 0;\r\n            let turns = 0;\r\n\r\n            // Niantic style\r\n            if (m.energyDelta != null) {\r\n                const ed = num(m.energyDelta, 0);\r\n                if (ed > 0) { kind = \"fast\"; energyGain = ed; }\r\n                if (ed < 0) { kind = \"charged\"; energyCost = Math.abs(ed); }\r\n            }\r\n            // PvPoke style\r\n            if (m.energyGain != null) { kind = \"fast\"; energyGain = num(m.energyGain, 0); }\r\n            if (m.energy != null) { kind = \"charged\"; energyCost = Math.abs(num(m.energy, 0)); }\r\n\r\n            turns = num(m.durationTurns ?? m.turns ?? m.cooldownTurns, kind === \"fast\" ? 1 : 0);\r\n            if (kind === \"fast\") turns = Math.max(1, Math.floor(turns) || 1);\r\n\r\n            // Fallbacks so battles actually progress\r\n            if (kind === \"fast\" && energyGain <= 0) { console.warn(`[PvP] fast move ${id} missing energyGain; using 8.`); energyGain = 8; }\r\n            if (kind === \"charged\" && energyCost <= 0) { console.warn(`[PvP] charged move ${id} missing energy cost; using 45.`); energyCost = 45; }\r\n\r\n            const move = { id, kind, type, power, energyGain, energyCost, turns };\r\n            if (!out[id] || power > out[id].power) out[id] = move;\r\n        }\r\n    }\r\n\r\n    MOVES = out;\r\n    return out;\r\n}\r\n\r\n// ---------------- Core sim helpers ----------------\r\nfunction enrichSideForLeague(src, leagueName = \"Master League\") {\r\n    const cap = typeof leagueName === \"string\" ? (LEAGUE_CAP[leagueName] ?? Infinity)\r\n        : (Number.isFinite(leagueName) ? Number(leagueName) : Infinity);\r\n\r\n    const sid = normId(src.speciesId || src.name);\r\n    const base = SPECIES[sid] || { atk: 200, def: 200, sta: 200, types: [\"Normal\"] };\r\n\r\n    const li = levelForCap(base.atk, base.def, base.sta, cap);\r\n    const cpm = CPM[li] || CPM[99];\r\n\r\n    const Atk = base.atk * cpm;\r\n    const Def = base.def * cpm;\r\n    const Sta = Math.floor(base.sta * cpm) * 2; // a bit tankier UI bar\r\n\r\n    const fastId = canonMoveId(src.fastMove);\r\n    const fast = MOVES[fastId] || null;\r\n    if (!fast) console.warn(`[PvP] fast move not found for ${src.name || src.speciesId}:`, src.fastMove);\r\n\r\n    const chargedMoves = (src.chargedMoves || [])\r\n        .map(canonMoveId)\r\n        .map(id => {\r\n            const mv = MOVES[id];\r\n            if (!mv) console.warn(`[PvP] charged move not found for ${src.name || src.speciesId}:`, id);\r\n            return mv;\r\n        })\r\n        .filter(Boolean);\r\n\r\n    return {\r\n        name: src.name || src.speciesId,\r\n        speciesId: sid,\r\n        types: SPECIES[sid]?.types || [\"Normal\"],\r\n        Atk, Def, MaxHP: Sta, HP: Sta,\r\n        fast,\r\n        chargedMoves,\r\n        energy: 0,\r\n    };\r\n}\r\n\r\nfunction bestCharged(att, def) {\r\n    let best = null, bestScore = -Infinity;\r\n    for (const m of (att.chargedMoves || [])) {\r\n        if (!m || m.kind !== \"charged\") continue;\r\n        const stab = att.types.includes(m.type) ? STAB : 1;\r\n        const effm = eff(m.type, def.types);\r\n        const dmg = damage(m.power, att.Atk, def.Def, stab, effm);\r\n        const dpe = (m.power || 0) / (m.energyCost || 45);\r\n        const score = dmg * 1.0 + dpe * 2.5; // bias to chunk and efficiency\r\n        if (score > bestScore) { bestScore = score; best = m; }\r\n    }\r\n    return best;\r\n}\r\n\r\n// ---------------- Public: simulateDuel (UI-friendly shape) ----------------\r\nexport function simulateDuel(attackerIn, defenderIn, shieldsA = 2, shieldsB = 2, _book = MOVES, leagueName = \"Master League\") {\r\n    const A = enrichSideForLeague(attackerIn, leagueName);\r\n    const B = enrichSideForLeague(defenderIn, leagueName);\r\n\r\n    // Pre-pick recommendations vs the known foe\r\n    const recA = bestCharged(A, B);\r\n    const recB = bestCharged(B, A);\r\n\r\n    let aSh = Math.max(0, shieldsA | 0), bSh = Math.max(0, shieldsB | 0);\r\n    let t = 0;\r\n    const MAX_TURNS = 2000;\r\n    const log = [];\r\n\r\n    const canThrow = (u) => (u.chargedMoves || []).some(m => u.energy >= (m.energyCost || 45));\r\n    const chooseThrow = (u, foe) => {\r\n        let pick = null, best = -Infinity;\r\n        for (const m of (u.chargedMoves || [])) {\r\n            if (u.energy < (m.energyCost || 45)) continue;\r\n            const stab = u.types.includes(m.type) ? STAB : 1;\r\n            const mult = eff(m.type, foe.types);\r\n            const dmg = damage(m.power, u.Atk, foe.Def, stab, mult);\r\n            if (dmg > best) { best = dmg; pick = m; }\r\n        }\r\n        return pick;\r\n    };\r\n\r\n    while (A.HP > 0 && B.HP > 0 && t < MAX_TURNS) {\r\n        t++;\r\n\r\n        // fast energy on their turn cadence\r\n        if (A.fast && t % (A.fast.turns || 1) === 0) A.energy += num(A.fast.energyGain, 0);\r\n        if (B.fast && t % (B.fast.turns || 1) === 0) B.energy += num(B.fast.energyGain, 0);\r\n\r\n        const aMove = canThrow(A) ? chooseThrow(A, B) : null;\r\n        const bMove = canThrow(B) ? chooseThrow(B, A) : null;\r\n\r\n        // CMP: attacker with higher Atk throws first on ties\r\n        const aFirst = aMove && bMove ? (A.Atk >= B.Atk) : !!aMove;\r\n\r\n        function resolveThrow(user, foe, move, who) {\r\n            if (!move) return;\r\n            const stab = user.types.includes(move.type) ? STAB : 1;\r\n            const mult = eff(move.type, foe.types);\r\n            const hit = damage(move.power, user.Atk, foe.Def, stab, mult);\r\n\r\n            let shielded = false;\r\n            if (who === \"A\" && bSh > 0) { if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) { bSh--; shielded = true; } }\r\n            else if (who === \"B\" && aSh > 0) { if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) { aSh--; shielded = true; } }\r\n\r\n            if (!shielded) { foe.HP = Math.max(0, foe.HP - hit); }\r\n            user.energy -= (move.energyCost || 45);\r\n            log.push(`${who} throws ${move.id}${shielded ? ' (shielded)' : ''}`);\r\n        }\r\n\r\n        if (aFirst) {\r\n            if (aMove) resolveThrow(A, B, aMove, \"A\");\r\n            else if (A.fast && t % (A.fast.turns || 1) === 0) {\r\n                const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\r\n                B.HP = Math.max(0, B.HP - hit);\r\n            }\r\n            if (B.HP <= 0) break;\r\n\r\n            if (bMove) resolveThrow(B, A, bMove, \"B\");\r\n            else if (B.fast && t % (B.fast.turns || 1) === 0) {\r\n                const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\r\n                A.HP = Math.max(0, A.HP - hit);\r\n            }\r\n            if (A.HP <= 0) break;\r\n\r\n        } else {\r\n            if (bMove) resolveThrow(B, A, bMove, \"B\");\r\n            else if (B.fast && t % (B.fast.turns || 1) === 0) {\r\n                const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\r\n                A.HP = Math.max(0, A.HP - hit);\r\n            }\r\n            if (A.HP <= 0) break;\r\n\r\n            if (aMove) resolveThrow(A, B, aMove, \"A\");\r\n            else if (A.fast && t % (A.fast.turns || 1) === 0) {\r\n                const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\r\n                B.HP = Math.max(0, B.HP - hit);\r\n            }\r\n            if (B.HP <= 0) break;\r\n        }\r\n    }\r\n\r\n    const winner =\r\n        A.HP <= 0 && B.HP <= 0 ? \"Draw\" :\r\n            A.HP <= 0 ? B.name :\r\n                B.HP <= 0 ? A.name :\r\n                    (A.HP === B.HP ? \"Draw\" : (A.HP > B.HP ? A.name : B.name));\r\n\r\n    return {\r\n        winner,\r\n        aHP: Math.round((A.HP / A.MaxHP) * 100),\r\n        bHP: Math.round((B.HP / B.MaxHP) * 100),\r\n        aRecommended: recA?.id || null,\r\n        bRecommended: recB?.id || null,\r\n        summary: log.slice(0, 12)\r\n    };\r\n}\r\n\r\n// ---------------- Public: bestOfThree (exact shape App expects) ----------------\r\nexport function bestOfThree(mine, enemy, myShields, foeShields, _book = MOVES, leagueName = \"Master League\") {\r\n    const fights = mine.map(m => {\r\n        const you = { ...m, name: m.name || m.speciesId };\r\n        const foe = { ...enemy, name: enemy.name || enemy.speciesId };\r\n        const r = simulateDuel(you, foe, myShields, foeShields, MOVES, leagueName);\r\n        const score = r.winner === you.name ? 1 : (r.winner === \"Draw\" ? 0 : -1);\r\n        return { you: you.name, vs: foe.name, ...r, score };\r\n    });\r\n    fights.sort((a, b) => (b.score - a.score) || (b.aHP - a.aHP) || (b.bHP - a.bHP));\r\n    return { best: fights[0], fights };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}