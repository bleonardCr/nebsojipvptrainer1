{"ast":null,"code":"// src/battleCalc.js\n// Competitive-lite PvP sim: league CP caps, real damage formula (approx),\n// STAB + type, turns/energy, CMP, and smart shielding.\n// API: buildMoveBook(gm), simulateDuel(mine, enemy, myShields, foeShields), bestOfThree(team, enemy, myShields, foeShields)\n\nlet SPECIES = {}; // speciesId -> {atk, def, sta, types: [\"Steel\",\"Fairy\"]}\nlet MOVES = {}; // moveId -> {id, kind:\"fast\"|\"charged\", type, power, energyGain, energyCost, turns}\n\n// ---------- League caps ----------\nexport const LEAGUE_CAP = {\n  \"Great League\": 1500,\n  \"Ultra League\": 2500,\n  \"Master League\": Infinity\n};\n\n// ---------- CP multipliers (half levels to 50) ----------\nconst CPM = [0 // pad to index by half-level: 0, 1=1.0, 2=1.5 etc (we use map below)\n];\n(function fillCPM() {\n  // PvPoke/Niantic CPM list to 50 (every 0.5 level)\n  const table = [0.094, 0.135137432, 0.16639787, 0.192650919, 0.21573247, 0.236572661, 0.25572005, 0.273530381, 0.29024988, 0.306057377, 0.3210876, 0.335445036, 0.34921268, 0.362457751, 0.37523559, 0.387592406, 0.39956728, 0.411193551, 0.42250001, 0.432926419, 0.44310755, 0.4530599578, 0.46279839, 0.472336083, 0.48168495, 0.4908558, 0.49985844, 0.508701765, 0.51739395, 0.525942511, 0.53435433, 0.542635767, 0.55079269, 0.558830576, 0.56675452, 0.574569153, 0.58227891, 0.589887907, 0.59740001, 0.604818814, 0.61215729, 0.619399365, 0.62656713, 0.633644533, 0.64065295, 0.647576426, 0.65443563, 0.661214806, 0.667934, 0.674577537, 0.68116492, 0.687680648, 0.69414365, 0.700538673, 0.70688421, 0.713164996, 0.71939909, 0.725571552, 0.7317, 0.734741009, 0.73776948, 0.740785574, 0.74378943, 0.746781211, 0.74976104, 0.752729087, 0.75568551, 0.758630378, 0.76156384, 0.764486065, 0.76739717, 0.770297266, 0.7731865, 0.776064962, 0.77893275, 0.781790055, 0.78463697, 0.787473578, 0.79030001, 0.792803968, 0.79530001, 0.797803921, 0.8003];\n  // map to half-level index: 1=>L1, 2=>L1.5 ... 99=>L50\n  CPM.length = 100;\n  CPM.fill(0);\n  for (let i = 0; i < table.length; i++) CPM[i + 1] = table[i];\n})();\nconst STAB = 1.2;\n\n// ---------- Type chart ----------\nconst TYPES = [\"Normal\", \"Fighting\", \"Flying\", \"Poison\", \"Ground\", \"Rock\", \"Bug\", \"Ghost\", \"Steel\", \"Fire\", \"Water\", \"Grass\", \"Electric\", \"Psychic\", \"Ice\", \"Dragon\", \"Dark\", \"Fairy\"];\nconst EFF = {};\nTYPES.forEach(a => EFF[a] = {}, TYPES.forEach(d => EFF[a][d] = 1));\nfunction S(atk, arr, m) {\n  arr.forEach(d => EFF[atk][d] = m);\n}\n_c = S;\nS(\"Fighting\", [\"Normal\", \"Rock\", \"Ice\", \"Dark\", \"Steel\"], 1.6);\nS(\"Fighting\", [\"Flying\", \"Poison\", \"Bug\", \"Psychic\", \"Fairy\"], 0.625);\nS(\"Flying\", [\"Fighting\", \"Bug\", \"Grass\"], 1.6);\nS(\"Flying\", [\"Rock\", \"Steel\", \"Electric\"], 0.625);\nS(\"Poison\", [\"Grass\", \"Fairy\"], 1.6);\nS(\"Poison\", [\"Poison\", \"Ground\", \"Rock\", \"Ghost\"], 0.625);\nS(\"Poison\", [\"Steel\"], 0.390625);\nS(\"Ground\", [\"Poison\", \"Rock\", \"Steel\", \"Fire\", \"Electric\"], 1.6);\nS(\"Ground\", [\"Bug\", \"Grass\"], 0.625);\nS(\"Ground\", [\"Flying\"], 0.390625);\nS(\"Rock\", [\"Flying\", \"Bug\", \"Fire\", \"Ice\"], 1.6);\nS(\"Rock\", [\"Fighting\", \"Ground\", \"Steel\"], 0.625);\nS(\"Bug\", [\"Grass\", \"Psychic\", \"Dark\"], 1.6);\nS(\"Bug\", [\"Fighting\", \"Flying\", \"Poison\", \"Ghost\", \"Steel\", \"Fire\", \"Fairy\"], 0.625);\nS(\"Ghost\", [\"Ghost\", \"Psychic\"], 1.6);\nS(\"Ghost\", [\"Dark\"], 0.625); // Normal-on-Ghost handled by move type\nS(\"Steel\", [\"Rock\", \"Ice\", \"Fairy\"], 1.6);\nS(\"Steel\", [\"Steel\", \"Fire\", \"Water\", \"Electric\"], 0.625);\nS(\"Fire\", [\"Bug\", \"Steel\", \"Grass\", \"Ice\"], 1.6);\nS(\"Fire\", [\"Rock\", \"Fire\", \"Water\", \"Dragon\"], 0.625);\nS(\"Water\", [\"Ground\", \"Rock\", \"Fire\"], 1.6);\nS(\"Water\", [\"Water\", \"Grass\", \"Dragon\"], 0.625);\nS(\"Grass\", [\"Ground\", \"Rock\", \"Water\"], 1.6);\nS(\"Grass\", [\"Flying\", \"Poison\", \"Bug\", \"Steel\", \"Fire\", \"Grass\", \"Dragon\"], 0.625);\nS(\"Electric\", [\"Flying\", \"Water\"], 1.6);\nS(\"Electric\", [\"Grass\", \"Electric\", \"Dragon\"], 0.625);\nS(\"Electric\", [\"Ground\"], 0.390625);\nS(\"Psychic\", [\"Fighting\", \"Poison\"], 1.6);\nS(\"Psychic\", [\"Psychic\", \"Steel\"], 0.625);\nS(\"Psychic\", [\"Dark\"], 0.390625);\nS(\"Ice\", [\"Flying\", \"Ground\", \"Grass\", \"Dragon\"], 1.6);\nS(\"Ice\", [\"Steel\", \"Fire\", \"Water\", \"Ice\"], 0.625);\nS(\"Dragon\", [\"Dragon\"], 1.6);\nS(\"Dragon\", [\"Steel\"], 0.625);\nS(\"Dragon\", [\"Fairy\"], 0.390625);\nS(\"Dark\", [\"Ghost\", \"Psychic\"], 1.6);\nS(\"Dark\", [\"Fighting\", \"Dark\", \"Fairy\"], 0.625);\nS(\"Fairy\", [\"Fighting\", \"Dragon\", \"Dark\"], 1.6);\nS(\"Fairy\", [\"Poison\", \"Steel\", \"Fire\"], 0.625);\nfunction tcase(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\nfunction normType(s) {\n  if (!s) return null;\n  const raw = String(s).replace(/^POKEMON_TYPE_/, '').replace(/_/g, ' ').trim().toLowerCase();\n  const T = tcase(raw);\n  return TYPES.includes(T) ? T : null;\n}\nfunction normId(s) {\n  return String(s || '').toLowerCase().replace(/[^\\w]+/g, '_').replace(/^_+|_+$/g, '');\n}\nfunction eff(moveType, defendTypes) {\n  let m = 1;\n  for (const t of defendTypes) {\n    var _EFF$moveType$t, _EFF$moveType;\n    m *= (_EFF$moveType$t = (_EFF$moveType = EFF[moveType]) === null || _EFF$moveType === void 0 ? void 0 : _EFF$moveType[t]) !== null && _EFF$moveType$t !== void 0 ? _EFF$moveType$t : 1;\n  }\n  return m;\n}\n\n// ---------- Damage & CP ----------\nfunction damage(pwr, atk, def, stab, effm) {\n  // PvP damage: floor(0.5 * PWR * Atk/Def * STAB * Eff) + 1\n  return Math.max(1, Math.floor(0.5 * pwr * (atk / def) * stab * effm) + 1);\n}\nfunction cp(atk, def, sta, cpm) {\n  return Math.floor(atk * Math.sqrt(def) * Math.sqrt(sta) * cpm * cpm / 10);\n}\nfunction levelForCap(baseAtk, baseDef, baseSta, cap) {\n  if (!isFinite(cap)) return 100; // treat as level 50\n  let bestLvlIndex = 99; // 50\n  for (let i = 99; i >= 1; i--) {\n    const cpm = CPM[i];\n    const cAtk = baseAtk * cpm,\n      cDef = baseDef * cpm,\n      cSta = baseSta * cpm;\n    if (cp(cAtk, cDef, cSta, 1) <= cap) {\n      bestLvlIndex = i;\n      break;\n    }\n  }\n  return bestLvlIndex;\n}\n\n// ---------- Build books ----------\nfunction buildSpeciesBook(gm) {\n  var _gm$data;\n  const poke = (gm === null || gm === void 0 ? void 0 : gm.pokemon) || (gm === null || gm === void 0 ? void 0 : (_gm$data = gm.data) === null || _gm$data === void 0 ? void 0 : _gm$data.pokemon) || (gm === null || gm === void 0 ? void 0 : gm.species) || [];\n  const out = {};\n  for (const p of poke) {\n    var _p$types, _p$types2, _ref, _ref2, _p$baseAttack, _p$stats, _ref3, _ref4, _p$baseDefense, _p$stats2, _ref5, _ref6, _p$baseStamina, _p$stats3;\n    const id = normId(p.speciesId || p.pokemonId || p.id || p.name || p.templateId);\n    if (!id) continue;\n    const types = [normType(p.type1 || ((_p$types = p.types) === null || _p$types === void 0 ? void 0 : _p$types[0])), normType(p.type2 || ((_p$types2 = p.types) === null || _p$types2 === void 0 ? void 0 : _p$types2[1]))].filter(Boolean);\n    const atk = Number((_ref = (_ref2 = (_p$baseAttack = p.baseAttack) !== null && _p$baseAttack !== void 0 ? _p$baseAttack : (_p$stats = p.stats) === null || _p$stats === void 0 ? void 0 : _p$stats.atk) !== null && _ref2 !== void 0 ? _ref2 : p.attack) !== null && _ref !== void 0 ? _ref : 200);\n    const def = Number((_ref3 = (_ref4 = (_p$baseDefense = p.baseDefense) !== null && _p$baseDefense !== void 0 ? _p$baseDefense : (_p$stats2 = p.stats) === null || _p$stats2 === void 0 ? void 0 : _p$stats2.def) !== null && _ref4 !== void 0 ? _ref4 : p.defense) !== null && _ref3 !== void 0 ? _ref3 : 200);\n    const sta = Number((_ref5 = (_ref6 = (_p$baseStamina = p.baseStamina) !== null && _p$baseStamina !== void 0 ? _p$baseStamina : (_p$stats3 = p.stats) === null || _p$stats3 === void 0 ? void 0 : _p$stats3.sta) !== null && _ref6 !== void 0 ? _ref6 : p.stamina) !== null && _ref5 !== void 0 ? _ref5 : 200);\n    out[id] = {\n      atk,\n      def,\n      sta,\n      types: types.length ? types : [\"Normal\"]\n    };\n  }\n  return out;\n}\nexport function buildMoveBook(gm) {\n  var _gm$data2, _gm$data3;\n  SPECIES = buildSpeciesBook(gm);\n  const pools = [gm === null || gm === void 0 ? void 0 : gm.moves, gm === null || gm === void 0 ? void 0 : gm.combatMoves, gm === null || gm === void 0 ? void 0 : (_gm$data2 = gm.data) === null || _gm$data2 === void 0 ? void 0 : _gm$data2.moves, gm === null || gm === void 0 ? void 0 : (_gm$data3 = gm.data) === null || _gm$data3 === void 0 ? void 0 : _gm$data3.combatMoves, gm === null || gm === void 0 ? void 0 : gm.moveList].filter(Boolean);\n  const book = {};\n  for (const list of pools) {\n    for (const m of list) {\n      var _ref7, _ref8, _ref9, _ref0, _m$moveId, _ref1, _ref10, _ref11, _m$pvpPower, _ref12, _ref13, _m$durationTurns;\n      const id = String((_ref7 = (_ref8 = (_ref9 = (_ref0 = (_m$moveId = m.moveId) !== null && _m$moveId !== void 0 ? _m$moveId : m.id) !== null && _ref0 !== void 0 ? _ref0 : m.uniqueId) !== null && _ref9 !== void 0 ? _ref9 : m.templateId) !== null && _ref8 !== void 0 ? _ref8 : m.name) !== null && _ref7 !== void 0 ? _ref7 : '');\n      if (!id) continue;\n      const type = normType(m.type || m.pokemonType || m.moveType) || \"Normal\";\n      const power = Number((_ref1 = (_ref10 = (_ref11 = (_m$pvpPower = m.pvpPower) !== null && _m$pvpPower !== void 0 ? _m$pvpPower : m.power) !== null && _ref11 !== void 0 ? _ref11 : m.combatPower) !== null && _ref10 !== void 0 ? _ref10 : m.damage) !== null && _ref1 !== void 0 ? _ref1 : 0);\n      // Niantic fields: energyDelta (>0 fast, <0 charged), durationTurns for PVP\n      let energyGain = 0,\n        energyCost = 0,\n        kind = \"fast\",\n        turns = 1;\n      if (m.energyDelta != null) {\n        const d = Number(m.energyDelta);\n        if (d > 0) {\n          energyGain = d;\n          kind = \"fast\";\n        }\n        if (d < 0) {\n          energyCost = Math.abs(d);\n          kind = \"charged\";\n        }\n      }\n      if (m.energy != null) {\n        energyCost = Math.abs(Number(m.energy));\n        kind = \"charged\";\n      }\n      if (m.energyGain != null) {\n        energyGain = Number(m.energyGain);\n        kind = \"fast\";\n      }\n      turns = Number((_ref12 = (_ref13 = (_m$durationTurns = m.durationTurns) !== null && _m$durationTurns !== void 0 ? _m$durationTurns : m.turns) !== null && _ref13 !== void 0 ? _ref13 : m.cooldownTurns) !== null && _ref12 !== void 0 ? _ref12 : kind === \"fast\" ? 1 : 0) || (kind === \"fast\" ? 1 : 0);\n      const prev = book[id];\n      if (!prev || power > prev.power) {\n        book[id] = {\n          id,\n          kind,\n          type,\n          power,\n          energyGain,\n          energyCost,\n          turns\n        };\n      }\n    }\n  }\n  MOVES = book;\n  return book;\n}\n\n// ---------- Choose charged by expected damage vs defender ----------\nfunction bestCharged(att, def) {\n  let best = null,\n    bestScore = -Infinity;\n  for (const id of att.chargedMoves || []) {\n    const m = MOVES[id];\n    if (!m || m.kind !== \"charged\") continue;\n    const stab = att.types.includes(m.type) ? STAB : 1;\n    const effm = eff(m.type, def.types);\n    const dmg = damage(m.power, att.Atk, def.Def, stab, effm);\n    const dpe = (m.power || 0) / (m.energyCost || 45);\n    const score = dmg * 1.0 + dpe * 2.5; // bias to moves that actually chunk\n    if (score > bestScore) {\n      bestScore = score;\n      best = m;\n    }\n  }\n  return best;\n}\n\n// ---------- Duel simulation ----------\nexport function simulateDuel(attackerIn, defenderIn, shieldsA = 2, shieldsB = 2, _book = MOVES, leagueName = \"Master League\") {\n  var _LEAGUE_CAP$leagueNam, _A$rec, _B$rec;\n  const cap = (_LEAGUE_CAP$leagueNam = LEAGUE_CAP[leagueName]) !== null && _LEAGUE_CAP$leagueNam !== void 0 ? _LEAGUE_CAP$leagueNam : isFinite(leagueName) ? Number(leagueName) : Infinity;\n  function enrichSide(src) {\n    const id = normId(src.speciesId || src.name);\n    const base = SPECIES[id] || {\n      atk: 200,\n      def: 200,\n      sta: 200,\n      types: [\"Normal\"]\n    };\n    const lvlIndex = levelForCap(base.atk, base.def, base.sta, cap);\n    const cpm = CPM[lvlIndex] || CPM[99];\n    const Atk = base.atk * cpm,\n      Def = base.def * cpm,\n      Sta = Math.floor(base.sta * cpm) * 2; // Sta scaled to feel tanky\n    const fast = MOVES[src.fastMove] || null;\n    const charged = (src.chargedMoves || []).filter(id => !!MOVES[id]);\n    return {\n      name: src.name || src.speciesId,\n      speciesId: id,\n      types: base.types,\n      Atk,\n      Def,\n      MaxHP: Sta,\n      HP: Sta,\n      energy: 0,\n      fast,\n      chargedMoves: charged,\n      rec: null // populated below\n    };\n  }\n  const A = enrichSide(attackerIn);\n  const B = enrichSide(defenderIn);\n\n  // pick recs now (per-defender)\n  A.rec = bestCharged(A, B);\n  B.rec = bestCharged(B, A);\n  const MAX_TURNS = 2000; // each fast turn ~0.5s, plenty\n  let aSh = Math.max(0, shieldsA | 0),\n    bSh = Math.max(0, shieldsB | 0);\n  let t = 0;\n  function canThrow(user) {\n    // any affordable charged?\n    for (const id of user.chargedMoves) {\n      const m = MOVES[id];\n      if (!m || m.kind !== \"charged\") continue;\n      if (user.energy >= (m.energyCost || 45)) return true;\n    }\n    return false;\n  }\n  function chooseThrow(user, foe) {\n    // take highest expected damage move we can afford\n    let pick = null,\n      best = -Infinity;\n    for (const id of user.chargedMoves) {\n      const m = MOVES[id];\n      if (!m || m.kind !== \"charged\") continue;\n      if (user.energy < (m.energyCost || 45)) continue;\n      const stab = user.types.includes(m.type) ? STAB : 1;\n      const effm = eff(m.type, foe.types);\n      const dmg = damage(m.power, user.Atk, foe.Def, stab, effm);\n      if (dmg > best) {\n        best = dmg;\n        pick = m;\n      }\n    }\n    return pick;\n  }\n  function shouldShield(foeMove, user) {\n    // smart-ish: shield if KO or big chunk >= 35% HP\n    const stab = user.types.includes(foeMove.type) ? STAB : 1; // irrelevant: foe�s STAB, but we need foe�s types; safe approx\n    // use foe�s STAB by passing via outer chooseThrow; we calculate damage using foe�s Atk vs our Def below\n    return false; // placeholder overridden below\n  }\n  const log = [];\n  while (A.HP > 0 && B.HP > 0 && t < MAX_TURNS) {\n    t++;\n\n    // advance fast move turns & energy\n    if (A.fast) {\n      if (t % (A.fast.turns || 1) === 0) A.energy += A.fast.energyGain || 0;\n    }\n    if (B.fast) {\n      if (t % (B.fast.turns || 1) === 0) B.energy += B.fast.energyGain || 0;\n    }\n\n    // Both decide to throw?\n    const aMove = canThrow(A) ? chooseThrow(A, B) : null;\n    const bMove = canThrow(B) ? chooseThrow(B, A) : null;\n\n    // CMP: higher Atk throws first when both can\n    const aFirst = aMove && bMove ? A.Atk >= B.Atk : !!aMove;\n    function resolveThrow(user, foe, move, foeShieldsRef, who) {\n      if (!move) return;\n      // smart shield decision for foe\n      const stab = user.types.includes(move.type) ? STAB : 1;\n      const mult = eff(move.type, foe.types);\n      const hit = damage(move.power, user.Atk, foe.Def, stab, mult);\n      let shielded = false;\n      if (who === \"A\" && bSh > 0) {\n        // B should shield if KO or >= 0.35 HP chunk\n        if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) {\n          bSh--;\n          shielded = true;\n        }\n      } else if (who === \"B\" && aSh > 0) {\n        if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) {\n          aSh--;\n          shielded = true;\n        }\n      }\n      if (!shielded) {\n        foe.HP = Math.max(0, foe.HP - hit);\n      }\n      user.energy -= move.energyCost || 45;\n      log.push(`${who} throws ${move.id}${shielded ? ' (shielded)' : ''}`);\n    }\n    if (aFirst) {\n      // A throws or fasts\n      if (aMove) resolveThrow(A, B, aMove, () => bSh, \"A\");else if (A.fast && t % (A.fast.turns || 1) === 0) {\n        const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\n        B.HP = Math.max(0, B.HP - hit);\n      }\n      if (B.HP <= 0) break;\n\n      // B acts\n      if (bMove) resolveThrow(B, A, bMove, () => aSh, \"B\");else if (B.fast && t % (B.fast.turns || 1) === 0) {\n        const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\n        A.HP = Math.max(0, A.HP - hit);\n      }\n      if (A.HP <= 0) break;\n    } else {\n      // B first\n      if (bMove) resolveThrow(B, A, bMove, () => aSh, \"B\");else if (B.fast && t % (B.fast.turns || 1) === 0) {\n        const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\n        A.HP = Math.max(0, A.HP - hit);\n      }\n      if (A.HP <= 0) break;\n      if (aMove) resolveThrow(A, B, aMove, () => bSh, \"A\");else if (A.fast && t % (A.fast.turns || 1) === 0) {\n        const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\n        B.HP = Math.max(0, B.HP - hit);\n      }\n      if (B.HP <= 0) break;\n    }\n  }\n  const winner = A.HP <= 0 && B.HP <= 0 ? \"Draw\" : A.HP <= 0 ? B.name : B.HP <= 0 ? A.name : A.HP === B.HP ? \"Draw\" : A.HP > B.HP ? A.name : B.name;\n  return {\n    winner,\n    aHP: Math.round(A.HP / A.MaxHP * 100),\n    // percentage for your UI bars\n    bHP: Math.round(B.HP / B.MaxHP * 100),\n    aRecommended: ((_A$rec = A.rec) === null || _A$rec === void 0 ? void 0 : _A$rec.id) || null,\n    bRecommended: ((_B$rec = B.rec) === null || _B$rec === void 0 ? void 0 : _B$rec.id) || null,\n    summary: log.slice(0, 12)\n  };\n}\n\n// Rank your 3 vs one enemy (returns same shape you already use)\nexport function bestOfThree(mine, enemy, myShields, foeShields, _book = MOVES, leagueName = \"Master League\") {\n  const fights = mine.map(m => {\n    const you = {\n      ...m,\n      name: m.name || m.speciesId\n    };\n    const foe = {\n      ...enemy,\n      name: enemy.name || enemy.speciesId\n    };\n    const r = simulateDuel(you, foe, myShields, foeShields, MOVES, leagueName);\n    const score = r.winner === you.name ? 1 : r.winner === \"Draw\" ? 0 : -1;\n    return {\n      you: you.name,\n      vs: foe.name,\n      ...r,\n      score\n    };\n  });\n  fights.sort((a, b) => b.score - a.score || b.aHP - a.aHP || b.bHP - a.bHP);\n  return {\n    best: fights[0],\n    fights\n  };\n}\nvar _c;\n$RefreshReg$(_c, \"S\");","map":{"version":3,"names":["SPECIES","MOVES","LEAGUE_CAP","Infinity","CPM","fillCPM","table","length","fill","i","STAB","TYPES","EFF","forEach","a","d","S","atk","arr","m","_c","tcase","s","charAt","toUpperCase","slice","toLowerCase","normType","raw","String","replace","trim","T","includes","normId","eff","moveType","defendTypes","t","_EFF$moveType$t","_EFF$moveType","damage","pwr","def","stab","effm","Math","max","floor","cp","sta","cpm","sqrt","levelForCap","baseAtk","baseDef","baseSta","cap","isFinite","bestLvlIndex","cAtk","cDef","cSta","buildSpeciesBook","gm","_gm$data","poke","pokemon","data","species","out","p","_p$types","_p$types2","_ref","_ref2","_p$baseAttack","_p$stats","_ref3","_ref4","_p$baseDefense","_p$stats2","_ref5","_ref6","_p$baseStamina","_p$stats3","id","speciesId","pokemonId","name","templateId","types","type1","type2","filter","Boolean","Number","baseAttack","stats","attack","baseDefense","defense","baseStamina","stamina","buildMoveBook","_gm$data2","_gm$data3","pools","moves","combatMoves","moveList","book","list","_ref7","_ref8","_ref9","_ref0","_m$moveId","_ref1","_ref10","_ref11","_m$pvpPower","_ref12","_ref13","_m$durationTurns","moveId","uniqueId","type","pokemonType","power","pvpPower","combatPower","energyGain","energyCost","kind","turns","energyDelta","abs","energy","durationTurns","cooldownTurns","prev","bestCharged","att","best","bestScore","chargedMoves","dmg","Atk","Def","dpe","score","simulateDuel","attackerIn","defenderIn","shieldsA","shieldsB","_book","leagueName","_LEAGUE_CAP$leagueNam","_A$rec","_B$rec","enrichSide","src","base","lvlIndex","Sta","fast","fastMove","charged","MaxHP","HP","rec","A","B","MAX_TURNS","aSh","bSh","canThrow","user","chooseThrow","foe","pick","shouldShield","foeMove","log","aMove","bMove","aFirst","resolveThrow","move","foeShieldsRef","who","mult","hit","shielded","push","winner","aHP","round","bHP","aRecommended","bRecommended","summary","bestOfThree","mine","enemy","myShields","foeShields","fights","map","you","r","vs","sort","b","$RefreshReg$"],"sources":["C:/Users/ben/Projects/nebsojipvptrainer/src/battleCalc.js"],"sourcesContent":["// src/battleCalc.js\r\n// Competitive-lite PvP sim: league CP caps, real damage formula (approx),\r\n// STAB + type, turns/energy, CMP, and smart shielding.\r\n// API: buildMoveBook(gm), simulateDuel(mine, enemy, myShields, foeShields), bestOfThree(team, enemy, myShields, foeShields)\r\n\r\nlet SPECIES = {};  // speciesId -> {atk, def, sta, types: [\"Steel\",\"Fairy\"]}\r\nlet MOVES = {};  // moveId -> {id, kind:\"fast\"|\"charged\", type, power, energyGain, energyCost, turns}\r\n\r\n// ---------- League caps ----------\r\nexport const LEAGUE_CAP = {\r\n    \"Great League\": 1500,\r\n    \"Ultra League\": 2500,\r\n    \"Master League\": Infinity\r\n};\r\n\r\n// ---------- CP multipliers (half levels to 50) ----------\r\nconst CPM = [\r\n    0, // pad to index by half-level: 0, 1=1.0, 2=1.5 etc (we use map below)\r\n];\r\n(function fillCPM() {\r\n    // PvPoke/Niantic CPM list to 50 (every 0.5 level)\r\n    const table = [\r\n        0.094, 0.135137432, 0.16639787, 0.192650919, 0.21573247, 0.236572661, 0.25572005, 0.273530381,\r\n        0.29024988, 0.306057377, 0.3210876, 0.335445036, 0.34921268, 0.362457751, 0.37523559, 0.387592406,\r\n        0.39956728, 0.411193551, 0.42250001, 0.432926419, 0.44310755, 0.4530599578, 0.46279839, 0.472336083,\r\n        0.48168495, 0.4908558, 0.49985844, 0.508701765, 0.51739395, 0.525942511, 0.53435433, 0.542635767,\r\n        0.55079269, 0.558830576, 0.56675452, 0.574569153, 0.58227891, 0.589887907, 0.59740001, 0.604818814,\r\n        0.61215729, 0.619399365, 0.62656713, 0.633644533, 0.64065295, 0.647576426, 0.65443563, 0.661214806,\r\n        0.667934, 0.674577537, 0.68116492, 0.687680648, 0.69414365, 0.700538673, 0.70688421, 0.713164996,\r\n        0.71939909, 0.725571552, 0.7317, 0.734741009, 0.73776948, 0.740785574, 0.74378943, 0.746781211,\r\n        0.74976104, 0.752729087, 0.75568551, 0.758630378, 0.76156384, 0.764486065, 0.76739717, 0.770297266,\r\n        0.7731865, 0.776064962, 0.77893275, 0.781790055, 0.78463697, 0.787473578, 0.79030001, 0.792803968,\r\n        0.79530001, 0.797803921, 0.8003\r\n    ];\r\n    // map to half-level index: 1=>L1, 2=>L1.5 ... 99=>L50\r\n    CPM.length = 100;\r\n    CPM.fill(0);\r\n    for (let i = 0; i < table.length; i++) CPM[i + 1] = table[i];\r\n})();\r\n\r\nconst STAB = 1.2;\r\n\r\n// ---------- Type chart ----------\r\nconst TYPES = [\r\n    \"Normal\", \"Fighting\", \"Flying\", \"Poison\", \"Ground\", \"Rock\", \"Bug\", \"Ghost\", \"Steel\",\r\n    \"Fire\", \"Water\", \"Grass\", \"Electric\", \"Psychic\", \"Ice\", \"Dragon\", \"Dark\", \"Fairy\"\r\n];\r\n\r\nconst EFF = {}; TYPES.forEach(a => (EFF[a] = {}), TYPES.forEach(d => EFF[a][d] = 1));\r\nfunction S(atk, arr, m) { arr.forEach(d => EFF[atk][d] = m); }\r\nS(\"Fighting\", [\"Normal\", \"Rock\", \"Ice\", \"Dark\", \"Steel\"], 1.6); S(\"Fighting\", [\"Flying\", \"Poison\", \"Bug\", \"Psychic\", \"Fairy\"], 0.625);\r\nS(\"Flying\", [\"Fighting\", \"Bug\", \"Grass\"], 1.6); S(\"Flying\", [\"Rock\", \"Steel\", \"Electric\"], 0.625);\r\nS(\"Poison\", [\"Grass\", \"Fairy\"], 1.6); S(\"Poison\", [\"Poison\", \"Ground\", \"Rock\", \"Ghost\"], 0.625); S(\"Poison\", [\"Steel\"], 0.390625);\r\nS(\"Ground\", [\"Poison\", \"Rock\", \"Steel\", \"Fire\", \"Electric\"], 1.6); S(\"Ground\", [\"Bug\", \"Grass\"], 0.625); S(\"Ground\", [\"Flying\"], 0.390625);\r\nS(\"Rock\", [\"Flying\", \"Bug\", \"Fire\", \"Ice\"], 1.6); S(\"Rock\", [\"Fighting\", \"Ground\", \"Steel\"], 0.625);\r\nS(\"Bug\", [\"Grass\", \"Psychic\", \"Dark\"], 1.6); S(\"Bug\", [\"Fighting\", \"Flying\", \"Poison\", \"Ghost\", \"Steel\", \"Fire\", \"Fairy\"], 0.625);\r\nS(\"Ghost\", [\"Ghost\", \"Psychic\"], 1.6); S(\"Ghost\", [\"Dark\"], 0.625); // Normal-on-Ghost handled by move type\r\nS(\"Steel\", [\"Rock\", \"Ice\", \"Fairy\"], 1.6); S(\"Steel\", [\"Steel\", \"Fire\", \"Water\", \"Electric\"], 0.625);\r\nS(\"Fire\", [\"Bug\", \"Steel\", \"Grass\", \"Ice\"], 1.6); S(\"Fire\", [\"Rock\", \"Fire\", \"Water\", \"Dragon\"], 0.625);\r\nS(\"Water\", [\"Ground\", \"Rock\", \"Fire\"], 1.6); S(\"Water\", [\"Water\", \"Grass\", \"Dragon\"], 0.625);\r\nS(\"Grass\", [\"Ground\", \"Rock\", \"Water\"], 1.6); S(\"Grass\", [\"Flying\", \"Poison\", \"Bug\", \"Steel\", \"Fire\", \"Grass\", \"Dragon\"], 0.625);\r\nS(\"Electric\", [\"Flying\", \"Water\"], 1.6); S(\"Electric\", [\"Grass\", \"Electric\", \"Dragon\"], 0.625); S(\"Electric\", [\"Ground\"], 0.390625);\r\nS(\"Psychic\", [\"Fighting\", \"Poison\"], 1.6); S(\"Psychic\", [\"Psychic\", \"Steel\"], 0.625); S(\"Psychic\", [\"Dark\"], 0.390625);\r\nS(\"Ice\", [\"Flying\", \"Ground\", \"Grass\", \"Dragon\"], 1.6); S(\"Ice\", [\"Steel\", \"Fire\", \"Water\", \"Ice\"], 0.625);\r\nS(\"Dragon\", [\"Dragon\"], 1.6); S(\"Dragon\", [\"Steel\"], 0.625); S(\"Dragon\", [\"Fairy\"], 0.390625);\r\nS(\"Dark\", [\"Ghost\", \"Psychic\"], 1.6); S(\"Dark\", [\"Fighting\", \"Dark\", \"Fairy\"], 0.625);\r\nS(\"Fairy\", [\"Fighting\", \"Dragon\", \"Dark\"], 1.6); S(\"Fairy\", [\"Poison\", \"Steel\", \"Fire\"], 0.625);\r\n\r\nfunction tcase(s) { return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase(); }\r\nfunction normType(s) {\r\n    if (!s) return null;\r\n    const raw = String(s).replace(/^POKEMON_TYPE_/, '').replace(/_/g, ' ').trim().toLowerCase();\r\n    const T = tcase(raw);\r\n    return TYPES.includes(T) ? T : null;\r\n}\r\nfunction normId(s) { return String(s || '').toLowerCase().replace(/[^\\w]+/g, '_').replace(/^_+|_+$/g, ''); }\r\n\r\nfunction eff(moveType, defendTypes) {\r\n    let m = 1;\r\n    for (const t of defendTypes) { m *= (EFF[moveType]?.[t] ?? 1); }\r\n    return m;\r\n}\r\n\r\n// ---------- Damage & CP ----------\r\nfunction damage(pwr, atk, def, stab, effm) {\r\n    // PvP damage: floor(0.5 * PWR * Atk/Def * STAB * Eff) + 1\r\n    return Math.max(1, Math.floor(0.5 * pwr * (atk / def) * stab * effm) + 1);\r\n}\r\nfunction cp(atk, def, sta, cpm) {\r\n    return Math.floor((atk * Math.sqrt(def) * Math.sqrt(sta) * cpm * cpm) / 10);\r\n}\r\nfunction levelForCap(baseAtk, baseDef, baseSta, cap) {\r\n    if (!isFinite(cap)) return 100; // treat as level 50\r\n    let bestLvlIndex = 99; // 50\r\n    for (let i = 99; i >= 1; i--) {\r\n        const cpm = CPM[i];\r\n        const cAtk = baseAtk * cpm, cDef = baseDef * cpm, cSta = baseSta * cpm;\r\n        if (cp(cAtk, cDef, cSta, 1) <= cap) { bestLvlIndex = i; break; }\r\n    }\r\n    return bestLvlIndex;\r\n}\r\n\r\n// ---------- Build books ----------\r\nfunction buildSpeciesBook(gm) {\r\n    const poke = gm?.pokemon || gm?.data?.pokemon || gm?.species || [];\r\n    const out = {};\r\n    for (const p of poke) {\r\n        const id = normId(p.speciesId || p.pokemonId || p.id || p.name || p.templateId);\r\n        if (!id) continue;\r\n        const types = [normType(p.type1 || p.types?.[0]), normType(p.type2 || p.types?.[1])].filter(Boolean);\r\n        const atk = Number(p.baseAttack ?? p.stats?.atk ?? p.attack ?? 200);\r\n        const def = Number(p.baseDefense ?? p.stats?.def ?? p.defense ?? 200);\r\n        const sta = Number(p.baseStamina ?? p.stats?.sta ?? p.stamina ?? 200);\r\n        out[id] = { atk, def, sta, types: types.length ? types : [\"Normal\"] };\r\n    }\r\n    return out;\r\n}\r\n\r\nexport function buildMoveBook(gm) {\r\n    SPECIES = buildSpeciesBook(gm);\r\n    const pools = [gm?.moves, gm?.combatMoves, gm?.data?.moves, gm?.data?.combatMoves, gm?.moveList].filter(Boolean);\r\n    const book = {};\r\n    for (const list of pools) {\r\n        for (const m of list) {\r\n            const id = String(m.moveId ?? m.id ?? m.uniqueId ?? m.templateId ?? m.name ?? '');\r\n            if (!id) continue;\r\n            const type = normType(m.type || m.pokemonType || m.moveType) || \"Normal\";\r\n            const power = Number(m.pvpPower ?? m.power ?? m.combatPower ?? m.damage ?? 0);\r\n            // Niantic fields: energyDelta (>0 fast, <0 charged), durationTurns for PVP\r\n            let energyGain = 0, energyCost = 0, kind = \"fast\", turns = 1;\r\n            if (m.energyDelta != null) {\r\n                const d = Number(m.energyDelta);\r\n                if (d > 0) { energyGain = d; kind = \"fast\"; }\r\n                if (d < 0) { energyCost = Math.abs(d); kind = \"charged\"; }\r\n            }\r\n            if (m.energy != null) { energyCost = Math.abs(Number(m.energy)); kind = \"charged\"; }\r\n            if (m.energyGain != null) { energyGain = Number(m.energyGain); kind = \"fast\"; }\r\n            turns = Number(m.durationTurns ?? m.turns ?? m.cooldownTurns ?? (kind === \"fast\" ? 1 : 0)) || (kind === \"fast\" ? 1 : 0);\r\n\r\n            const prev = book[id];\r\n            if (!prev || power > prev.power) {\r\n                book[id] = { id, kind, type, power, energyGain, energyCost, turns };\r\n            }\r\n        }\r\n    }\r\n    MOVES = book;\r\n    return book;\r\n}\r\n\r\n// ---------- Choose charged by expected damage vs defender ----------\r\nfunction bestCharged(att, def) {\r\n    let best = null, bestScore = -Infinity;\r\n    for (const id of (att.chargedMoves || [])) {\r\n        const m = MOVES[id];\r\n        if (!m || m.kind !== \"charged\") continue;\r\n        const stab = att.types.includes(m.type) ? STAB : 1;\r\n        const effm = eff(m.type, def.types);\r\n        const dmg = damage(m.power, att.Atk, def.Def, stab, effm);\r\n        const dpe = (m.power || 0) / (m.energyCost || 45);\r\n        const score = dmg * 1.0 + dpe * 2.5; // bias to moves that actually chunk\r\n        if (score > bestScore) { bestScore = score; best = m; }\r\n    }\r\n    return best;\r\n}\r\n\r\n// ---------- Duel simulation ----------\r\nexport function simulateDuel(attackerIn, defenderIn, shieldsA = 2, shieldsB = 2, _book = MOVES, leagueName = \"Master League\") {\r\n    const cap = LEAGUE_CAP[leagueName] ?? (isFinite(leagueName) ? Number(leagueName) : Infinity);\r\n\r\n    function enrichSide(src) {\r\n        const id = normId(src.speciesId || src.name);\r\n        const base = SPECIES[id] || { atk: 200, def: 200, sta: 200, types: [\"Normal\"] };\r\n        const lvlIndex = levelForCap(base.atk, base.def, base.sta, cap);\r\n        const cpm = CPM[lvlIndex] || CPM[99];\r\n\r\n        const Atk = base.atk * cpm, Def = base.def * cpm, Sta = Math.floor(base.sta * cpm) * 2; // Sta scaled to feel tanky\r\n        const fast = MOVES[src.fastMove] || null;\r\n        const charged = (src.chargedMoves || []).filter(id => !!MOVES[id]);\r\n\r\n        return {\r\n            name: src.name || src.speciesId,\r\n            speciesId: id,\r\n            types: base.types,\r\n            Atk, Def, MaxHP: Sta, HP: Sta,\r\n            energy: 0,\r\n            fast, chargedMoves: charged,\r\n            rec: null // populated below\r\n        };\r\n    }\r\n\r\n    const A = enrichSide(attackerIn);\r\n    const B = enrichSide(defenderIn);\r\n\r\n    // pick recs now (per-defender)\r\n    A.rec = bestCharged(A, B);\r\n    B.rec = bestCharged(B, A);\r\n\r\n    const MAX_TURNS = 2000; // each fast turn ~0.5s, plenty\r\n    let aSh = Math.max(0, shieldsA | 0), bSh = Math.max(0, shieldsB | 0);\r\n    let t = 0;\r\n\r\n    function canThrow(user) { // any affordable charged?\r\n        for (const id of user.chargedMoves) {\r\n            const m = MOVES[id]; if (!m || m.kind !== \"charged\") continue;\r\n            if (user.energy >= (m.energyCost || 45)) return true;\r\n        } return false;\r\n    }\r\n    function chooseThrow(user, foe) {\r\n        // take highest expected damage move we can afford\r\n        let pick = null, best = -Infinity;\r\n        for (const id of user.chargedMoves) {\r\n            const m = MOVES[id]; if (!m || m.kind !== \"charged\") continue;\r\n            if (user.energy < (m.energyCost || 45)) continue;\r\n            const stab = user.types.includes(m.type) ? STAB : 1;\r\n            const effm = eff(m.type, foe.types);\r\n            const dmg = damage(m.power, user.Atk, foe.Def, stab, effm);\r\n            if (dmg > best) { best = dmg; pick = m; }\r\n        }\r\n        return pick;\r\n    }\r\n    function shouldShield(foeMove, user) { // smart-ish: shield if KO or big chunk >= 35% HP\r\n        const stab = (user.types.includes(foeMove.type) ? STAB : 1); // irrelevant: foe�s STAB, but we need foe�s types; safe approx\r\n        // use foe�s STAB by passing via outer chooseThrow; we calculate damage using foe�s Atk vs our Def below\r\n        return false; // placeholder overridden below\r\n    }\r\n\r\n    const log = [];\r\n\r\n    while (A.HP > 0 && B.HP > 0 && t < MAX_TURNS) {\r\n        t++;\r\n\r\n        // advance fast move turns & energy\r\n        if (A.fast) { if (t % (A.fast.turns || 1) === 0) A.energy += (A.fast.energyGain || 0); }\r\n        if (B.fast) { if (t % (B.fast.turns || 1) === 0) B.energy += (B.fast.energyGain || 0); }\r\n\r\n        // Both decide to throw?\r\n        const aMove = canThrow(A) ? chooseThrow(A, B) : null;\r\n        const bMove = canThrow(B) ? chooseThrow(B, A) : null;\r\n\r\n        // CMP: higher Atk throws first when both can\r\n        const aFirst = aMove && bMove ? (A.Atk >= B.Atk) : !!aMove;\r\n\r\n        function resolveThrow(user, foe, move, foeShieldsRef, who) {\r\n            if (!move) return;\r\n            // smart shield decision for foe\r\n            const stab = (user.types.includes(move.type) ? STAB : 1);\r\n            const mult = eff(move.type, foe.types);\r\n            const hit = damage(move.power, user.Atk, foe.Def, stab, mult);\r\n            let shielded = false;\r\n            if (who === \"A\" && bSh > 0) {\r\n                // B should shield if KO or >= 0.35 HP chunk\r\n                if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) { bSh--; shielded = true; }\r\n            } else if (who === \"B\" && aSh > 0) {\r\n                if (hit >= foe.HP || hit >= foe.MaxHP * 0.35) { aSh--; shielded = true; }\r\n            }\r\n\r\n            if (!shielded) { foe.HP = Math.max(0, foe.HP - hit); }\r\n            user.energy -= (move.energyCost || 45);\r\n            log.push(`${who} throws ${move.id}${shielded ? ' (shielded)' : ''}`);\r\n        }\r\n\r\n        if (aFirst) {\r\n            // A throws or fasts\r\n            if (aMove) resolveThrow(A, B, aMove, () => bSh, \"A\");\r\n            else if (A.fast && t % (A.fast.turns || 1) === 0) {\r\n                const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\r\n                B.HP = Math.max(0, B.HP - hit);\r\n            }\r\n            if (B.HP <= 0) break;\r\n\r\n            // B acts\r\n            if (bMove) resolveThrow(B, A, bMove, () => aSh, \"B\");\r\n            else if (B.fast && t % (B.fast.turns || 1) === 0) {\r\n                const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\r\n                A.HP = Math.max(0, A.HP - hit);\r\n            }\r\n            if (A.HP <= 0) break;\r\n\r\n        } else {\r\n            // B first\r\n            if (bMove) resolveThrow(B, A, bMove, () => aSh, \"B\");\r\n            else if (B.fast && t % (B.fast.turns || 1) === 0) {\r\n                const hit = damage(B.fast.power || 1, B.Atk, A.Def, B.types.includes(B.fast.type) ? STAB : 1, eff(B.fast.type, A.types));\r\n                A.HP = Math.max(0, A.HP - hit);\r\n            }\r\n            if (A.HP <= 0) break;\r\n\r\n            if (aMove) resolveThrow(A, B, aMove, () => bSh, \"A\");\r\n            else if (A.fast && t % (A.fast.turns || 1) === 0) {\r\n                const hit = damage(A.fast.power || 1, A.Atk, B.Def, A.types.includes(A.fast.type) ? STAB : 1, eff(A.fast.type, B.types));\r\n                B.HP = Math.max(0, B.HP - hit);\r\n            }\r\n            if (B.HP <= 0) break;\r\n        }\r\n    }\r\n\r\n    const winner =\r\n        A.HP <= 0 && B.HP <= 0 ? \"Draw\" :\r\n            A.HP <= 0 ? B.name :\r\n                B.HP <= 0 ? A.name :\r\n                    (A.HP === B.HP ? \"Draw\" : (A.HP > B.HP ? A.name : B.name));\r\n\r\n    return {\r\n        winner,\r\n        aHP: Math.round((A.HP / A.MaxHP) * 100), // percentage for your UI bars\r\n        bHP: Math.round((B.HP / B.MaxHP) * 100),\r\n        aRecommended: A.rec?.id || null,\r\n        bRecommended: B.rec?.id || null,\r\n        summary: log.slice(0, 12)\r\n    };\r\n}\r\n\r\n// Rank your 3 vs one enemy (returns same shape you already use)\r\nexport function bestOfThree(mine, enemy, myShields, foeShields, _book = MOVES, leagueName = \"Master League\") {\r\n    const fights = mine.map(m => {\r\n        const you = { ...m, name: m.name || m.speciesId };\r\n        const foe = { ...enemy, name: enemy.name || enemy.speciesId };\r\n        const r = simulateDuel(you, foe, myShields, foeShields, MOVES, leagueName);\r\n        const score = r.winner === you.name ? 1 : (r.winner === \"Draw\" ? 0 : -1);\r\n        return { you: you.name, vs: foe.name, ...r, score };\r\n    });\r\n    fights.sort((a, b) => (b.score - a.score) || (b.aHP - a.aHP) || (b.bHP - a.bHP));\r\n    return { best: fights[0], fights };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}